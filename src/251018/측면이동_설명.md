# 정육면체 측면 이동 이해하기

## 🎲 정육면체 기본 구조

정육면체를 펼친 전개도를 상상해보세요:

```
           [북쪽 3]
              ↑
   [서쪽 1]←[윗면 4]→[동쪽 0]
              ↓
           [남쪽 2]
```

## 📐 좌표계 이해하기

### 측면 (0, 1, 2, 3)의 좌표

```
[행][열] = [높이][둘레]

행 0 ──────────  ← 정육면체 꼭대기 (윗면과 붙어있음)
행 1
행 2
...
행 M-1 ────────  ← 정육면체 바닥 (평면과 붙어있음)
```

### 윗면(4)의 좌표

```
         열 0   열 1   열 2  ... 열 M-1
         │      │      │         │
행 0 ─── 북쪽과 인접 ──────────────
행 1
행 2
...
행 M-1 ─ 남쪽과 인접 ──────────────

열 0 = 서쪽과 인접
열 M-1 = 동쪽과 인접
```

## 🔄 측면 회전 이동 (가장 헷갈리는 부분!)

### 정육면체를 위에서 본 모습

```
         북쪽(3)
            ↑
            |
   서쪽(1)←─●─→동쪽(0)
            |
            ↓
         남쪽(2)
```

### 왼쪽으로 나가기 (열 < 0) - 반시계 방향 회전

**예시: M = 5일 때**

1. **동쪽(0) → 남쪽(2)**
   ```
   동쪽 면의 (행3, 열-1)에서 왼쪽으로 나감
   → 남쪽 면의 (행3, 열4)로 도착
   
   [동쪽 0]         [남쪽 2]
   . . . . .        . . . . .
   . . . . .        . . . . .
   . . . . .        . . . . .
   P→→→→→→→────────→→→→→→→A
   . . . . .        . . . . .
   ```

2. **남쪽(2) → 서쪽(1)**
   ```
   [남쪽 2]         [서쪽 1]
   . . . . .        . . . . .
   P→→→→→→→────────→→→→→→→A
   ```

3. **서쪽(1) → 북쪽(3)**
4. **북쪽(3) → 동쪽(0)**

> 💡 **핵심**: 왼쪽으로 나가면 **행은 그대로**, 열만 M-1로 변경!

### 오른쪽으로 나가기 (열 >= M) - 시계 방향 회전

1. **동쪽(0) → 북쪽(3)**
   ```
   동쪽 면의 (행3, 열5)에서 오른쪽으로 나감
   → 북쪽 면의 (행3, 열0)로 도착
   
   [동쪽 0]         [북쪽 3]
   . . . . .        . . . . .
   . . . . .        . . . . .
   . . . . .        . . . . .
   . . . . P→→→→→→→A . . . .
   . . . . .        . . . . .
   ```

2. **북쪽(3) → 서쪽(1)**
3. **서쪽(1) → 남쪽(2)**
4. **남쪽(2) → 동쪽(0)**

> 💡 **핵심**: 오른쪽으로 나가면 **행은 그대로**, 열만 0으로 변경!

## ⬆️ 위로 올라가기 (행 < 0) - 윗면으로 이동

### 동쪽 면에서 위로

```
      [윗면 4]
    . . . . A
    . . . . ↑
    . . . . ↑      열 c에서 위로
    . . . . ↑      → 윗면 (c, M-1)로 도착
    . . . . ↑
    ─────────
    . . . . .
    . . P . .
    . . ↑ . .      [동쪽 0]
    . . . . .
    . . . . .
```

### 서쪽 면에서 위로

```
      [윗면 4]
    A . . . .
    ↑ . . . .      열 c에서 위로
    ↑ . . . .      → 윗면 (M-c-1, 0)로 도착 (반전됨!)
    ↑ . . . .
    ↑ . . . .
    ─────────
    . . . . .
    . . P . .      [서쪽 1]
    . . ↑ . .
    . . . . .
    . . . . .
```

### 남쪽 면에서 위로

```
      [윗면 4]
    . . . . .
    . . . . .
    . . . . .
    . . . . .
    . . A . .
    ────↑────
    . . ↑ . .      [남쪽 2]
    . . P . .      열 c에서 위로
    . . . . .      → 윗면 (M-1, c)로 도착
    . . . . .
    . . . . .
```

### 북쪽 면에서 위로

```
      [윗면 4]
    . . A . .
    . . . . .      열 c에서 위로
    . . . . .      → 윗면 (0, M-c-1)로 도착 (반전됨!)
    . . . . .
    . . . . .
    ────↑────
    . . ↑ . .
    . . P . .      [북쪽 3]
    . . . . .
    . . . . .
    . . . . .
```

## 🧠 암기법

### 좌우 이동 (측면 회전)

- **왼쪽** = 반시계 방향: 동→남→서→북→동
- **오른쪽** = 시계 방향: 동→북→서→남→동
- **행은 유지**, 열만 변경 (왼쪽: M-1, 오른쪽: 0)

### 위로 이동 (윗면으로)

- **동쪽/남쪽**: 좌표 그대로 또는 간단한 변환
- **서쪽/북쪽**: 좌표 반전 필요 (M-c-1)
- 이유: 서쪽/북쪽은 동쪽/남쪽과 반대 방향을 바라봄!

## 🎯 실전 팁

1. **종이에 정육면체 그리기**
    - 전개도를 직접 그려보세요
    - 각 면에 번호 표시 (0, 1, 2, 3, 4)

2. **손가락으로 따라가기**
    - 현재 위치에서 이동 방향으로 손가락을 움직여보세요
    - 어느 면으로 넘어가는지 확인

3. **대칭성 활용**
    - 동쪽 ↔ 서쪽 (반대)
    - 남쪽 ↔ 북쪽 (반대)
    - 반대 면은 좌표 변환이 비슷!

4. **디버그 출력 활용**
    - 코드의 `DEBUG_CUBE = true` 설정
    - 전개도가 자동으로 출력되어 이동 경로를 볼 수 있음!

## 📝 코드에서 확인하는 법

```kotlin
// handleSideTransition 함수에서:

when {
    nr < 0 -> {
        // 위로 = 윗면(4)으로
        val nextIdx = 4
        val transformedPos = when (idx) {
            0 -> c to 0              // 동쪽 → 윗면 오른쪽
            1 -> (M - c - 1) to (M - 1)  // 서쪽 → 윗면 왼쪽 (반전)
            2 -> (M - 1) to c        // 남쪽 → 윗면 아래
            3 -> 0 to (M - c - 1)    // 북쪽 → 윗면 위 (반전)
        }
    }

    nc < 0 -> {
        // 왼쪽 = 반시계 방향
        val nextIdx = when (idx) {
            0 -> 2  // 동 → 남
            1 -> 3  // 서 → 북
            2 -> 1  // 남 → 서
            3 -> 0  // 북 → 동
        }
        val transformedPos = nr to (M - 1)  // 행 유지, 열은 M-1
    }

    nc >= M -> {
        // 오른쪽 = 시계 방향
        val nextIdx = when (idx) {
            0 -> 3  // 동 → 북
            1 -> 2  // 서 → 남
            2 -> 0  // 남 → 동
            3 -> 1  // 북 → 서
        }
        val transformedPos = nr to 0  // 행 유지, 열은 0
    }
}
```

